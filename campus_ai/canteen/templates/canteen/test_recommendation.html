<!DOCTYPE html>
<html>
<head>
    <title>Stall Recommendation Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h2 class="mb-4">üçΩ Stall Recommendation Engine</h2>

<form method="get" class="mb-4">
    <label>Select Time Slot</label>
    <select name="timeslot" class="form-select w-50" onchange="this.form.submit()">
        <option value="">-- Select --</option>
        {% for slot in timeslots %}
            <option value="{{ slot.id }}"
                {% if selected_timeslot and slot.id == selected_timeslot.id %}
                    selected
                {% endif %}>
                {{ slot }}
            </option>
        {% endfor %}
    </select>
</form>

{% if recommendations %}

<table class="table table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Rank</th>
            <th>Stall</th>
            <th>Current Load</th>
            <th>Estimated Wait (min)</th>
            <th>Score</th>
        </tr>
    </thead>
    <tbody>
        {% for r in recommendations %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ r.stall.name }}</td>
            <td>{{ r.current_load }}</td>
            <td>{{ r.estimated_wait_time }}</td>
            <td>{{ r.score }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endif %}

</body>
</html>
